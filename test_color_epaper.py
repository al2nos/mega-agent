#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–¢–µ—Å—Ç 4-—Ü–≤–µ—Ç–Ω–æ–≥–æ e-paper –¥–∏—Å–ø–ª–µ—è Waveshare 2.13inch B
"""

try:
    import sys
    import os
    sys.path.append(os.path.join(os.path.dirname(__file__), 'waveshare_epd'))
    
    # –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é
    from waveshare_epd.epd2in13b_v3 import EPD
    
    print("üîç –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ 4-color e-paper –¥–∏—Å–ø–ª–µ—è...")
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –¥–∏—Å–ø–ª–µ—è
    epd = EPD()
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    if epd.module_init() == 0:
        print("‚úÖ –î–∏—Å–ø–ª–µ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        
        # –û—á–∏—Å—Ç–∫–∞ –¥–∏—Å–ø–ª–µ—è
        epd.Clear()
        print("üßπ –î–∏—Å–ø–ª–µ–π –æ—á–∏—â–µ–Ω")
        
        # –¢–µ—Å—Ç - –ø—Ä–æ—Å—Ç–æ –∑–∞—Å—ã–ø–∞–µ–º
        epd.sleep()
        print("üò¥ –î–∏—Å–ø–ª–µ–π –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –≤ —Ä–µ–∂–∏–º —Å–Ω–∞")
        
        epd.module_exit()
        print("‚úÖ –¢–µ—Å—Ç 4-color e-paper –¥–∏—Å–ø–ª–µ—è –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!")
    else:
        print("‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∏—Å–ø–ª–µ—è")
        
except ImportError as e:
    print(f"‚ùå –î—Ä–∞–π–≤–µ—Ä 4-color e-paper –Ω–µ –Ω–∞–π–¥–µ–Ω: {e}")
    print("–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥—Ä–∞–π–≤–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
except Exception as e:
    print(f"‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ 4-color e-paper: {e}")
    print("–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è –∫ SPI")

if __name__ == "__main__":
    print("üé® Waveshare 4-Color e-Paper 2.13inch B Test")
    print("=============================================")